{{!-- <link rel="stylesheet" href="/styles/userLogin.css">

<div class="login-box">
<h2>User Registration</h2>
<form action="/user/register" method="POST" class="form">
    <input type="text" name="username" placeholder="Username" required>
    <input type="password" name="password" placeholder="Password" required>
    <input type="email" name="email" placeholder="Email" required>
    <button type="submit">Register</button>
</form>
<p>Already registered? <a href="/user/login">Login</a></p>
</div> --}}
<link rel="stylesheet" href="/styles/userLogin.css">

<div class="login-box">
    <h2>User Registration</h2>
    <form action="/user/register" method="POST" class="form" id="registerForm">
        <input type="text" name="username" placeholder="Username" required value="{{username}}">
        <input type="password" name="password" id="password" placeholder="Password" required>
        <small id="passwordHint">Password must be at least 8 characters, include a number & a special character.</small>
        <div id="passwordError" style="color:red;">{{error}}</div>
        <input type="email" name="email" placeholder="Email" required value="{{email}}">
        <button type="submit">Register</button>
    </form>
    <p>Already registered? <a href="/user/login">Login</a></p>
</div>

<script>
const form = document.getElementById('registerForm');
const passwordInput = document.getElementById('password');
const passwordError = document.getElementById('passwordError');

// Regex: at least 8 chars, 1 number, 1 special char
const passwordRegex = /^(?=.*[0-9])(?=.*[!@#$%^&*])[A-Za-z0-9!@#$%^&*]{8,}$/;

passwordInput.addEventListener('input', () => {
    if (!passwordRegex.test(passwordInput.value)) {
        passwordError.textContent = "Password must be at least 8 characters long, include a number and a special character.";
    } else {
        passwordError.textContent = "";
    }
});

form.addEventListener('submit', (e) => {
    if (!passwordRegex.test(passwordInput.value)) {
        e.preventDefault(); // prevent form submission
        passwordError.textContent = "Password must be at least 8 characters long, include a number and a special character.";
        passwordInput.focus();
    }
});
</script>
