{{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
</head>
<body>

<header class="main-header">
    <div class="logo">ParkEase</div>
    <nav class="nav-links">
    <a href="home">Home</a>
    <a href="/user/Dashboard">Dashboard</a>
    <a href="#book">Book Now</a>
    <a href="#features">Features</a>
    {{#if userId}}
        <a href="/user/bookings">Booking History</a>
        <a href="/user/logout">Logout</a>
    {{else}}
        <a href="login-options">Login</a>
    {{/if}}
</nav>

</header>
<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase </h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn">Get Started</a>
    </div>
</header>

<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
                <option value="">Select Location</option>
                {{#each slots}}
                    <option value="{{this._id}}">
                        {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
                    </option>
                {{/each}}
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="submit-button">Book Now</button>
        {{else}}
        <a href="/user/login" class="submit-button">Login to Book</a>
        {{/if}}
    </form>
</section>


<section class="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>

<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

</body>
</html> --}}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
    <style>
        /* Simple responsive navbar styles */
        .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #333;
            color: #fff;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-links a, .nav-links input {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border: none;
            background: transparent;
        }

        .nav-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .nav-toggle span {
            height: 3px;
            width: 25px;
            background-color: white;
            margin: 3px;
        }

        @media screen and (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                background-color: #333;
                position: absolute;
                right: 10px;
                top: 60px;
                width: 200px;
            }

            .nav-links a {
                padding: 10px;
                border-top: 1px solid #444;
            }

            .nav-links.show {
                display: flex;
            }

            .nav-toggle {
                display: flex;
            }
        }

        .search-input {
            padding: 5px;
            border-radius: 5px;
            border: none;
        }
    </style>
</head>
<body>

<header class="main-header">
    <div class="logo">ParkEase</div>
    <div class="nav-toggle" onclick="toggleNav()">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="nav-links" id="navLinks">
        <a href="/user/home">Home</a>
        <a href="/user/dashboard">Dashboard</a>
        <a href="#book">Book Now</a>
        <a href="#features">Features</a>
        {{#if userId}}
            <a href="/user/bookings">Booking History</a>
            <a href="/user/logout">Logout</a>
        {{else}}
            <a href="/user/login">Login</a>
        {{/if}}
        <input type="text" id="searchInput" class="search-input" placeholder="Search location" onkeyup="filterLocations()">
    </nav>
</header>

<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase</h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn">Get Started</a>
    </div>
</header>

<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
                <option value="">Select Location</option>
                {{#each slots}}
                    <option value="{{this._id}}" data-location="{{this.location}}">
                        {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
                    </option>
                {{/each}}
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="submit-button">Book Now</button>
        {{else}}
        <a href="/user/login" class="submit-button">Login to Book</a>
        {{/if}}
    </form>
</section>

<section class="features" id="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>
{{!-- 
<input type="text" id="searchBookingInput" class="search-input" placeholder="Search your bookings" onkeyup="filterBookingCards()" onkeypress="preventSubmit(event)"> --}}
<input
  type="text"
  id="searchBookingInput"
  class="search-input"
  placeholder="Search your bookings"
  oninput="filterBookingCards()"
  onkeypress="preventSubmit(event)"
>
<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card" data-location="{{this.location}}">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

<!-- Navbar toggle & search filter -->
<script>
    function toggleNav() {
        document.getElementById('navLinks').classList.toggle('show');
    }

    {{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
</head>
<body>

<header class="main-header">
    <div class="logo">ParkEase</div>
    <nav class="nav-links">
    <a href="home">Home</a>
    <a href="/user/Dashboard">Dashboard</a>
    <a href="#book">Book Now</a>
    <a href="#features">Features</a>
    {{#if userId}}
        <a href="/user/bookings">Booking History</a>
        <a href="/user/logout">Logout</a>
    {{else}}
        <a href="login-options">Login</a>
    {{/if}}
</nav>

</header>
<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase </h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn">Get Started</a>
    </div>
</header>

<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
                <option value="">Select Location</option>
                {{#each slots}}
                    <option value="{{this._id}}">
                        {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
                    </option>
                {{/each}}
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="submit-button">Book Now</button>
        {{else}}
        <a href="/user/login" class="submit-button">Login to Book</a>
        {{/if}}
    </form>
</section>


<section class="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>

<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

</body>
</html> --}}






{{!-- 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
    <style>
        /* Simple responsive navbar styles */
        .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: #333;
            color: #fff;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .nav-links a, .nav-links input {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border: none;
            background: transparent;
        }

        .nav-toggle {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .nav-toggle span {
            height: 3px;
            width: 25px;
            background-color: white;
            margin: 3px;
        }

        @media screen and (max-width: 768px) {
            .nav-links {
                display: none;
                flex-direction: column;
                background-color: #333;
                position: absolute;
                right: 10px;
                top: 60px;
                width: 200px;
            }

            .nav-links a {
                padding: 10px;
                border-top: 1px solid #444;
            }

            .nav-links.show {
                display: flex;
            }

            .nav-toggle {
                display: flex;
            }
        }

        .search-input {
            padding: 5px;
            border-radius: 5px;
            border: none;
        }
    </style>
</head>
<body>

<header class="main-header">
    <div class="logo">ParkEase</div>
    <div class="nav-toggle" onclick="toggleNav()">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <nav class="nav-links" id="navLinks">
        <a href="/user/home">Home</a>
        <a href="/user/dashboard">Dashboard</a>
        <a href="#book">Book Now</a>
        <a href="#features">Features</a>
        {{#if userId}}
            <a href="/user/bookings">Booking History</a>
            <a href="/user/logout">Logout</a>
        {{else}}
            <a href="/user/login">Login</a>
        {{/if}}
        <input type="text" id="searchInput" class="search-input" placeholder="Search location" onkeyup="filterLocations()">
    </nav>
</header>

<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase</h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn">Get Started</a>
    </div>
</header>

<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
                <option value="">Select Location</option>
                {{#each slots}}
                    <option value="{{this._id}}" data-location="{{this.location}}">
                        {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
                    </option>
                {{/each}}
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="submit-button">Book Now</button>
        {{else}}
        <a href="/user/login" class="submit-button">Login to Book</a>
        {{/if}}
    </form>
</section>

<section class="features" id="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>
{{!-- 
<input type="text" id="searchBookingInput" class="search-input" placeholder="Search your bookings" onkeyup="filterBookingCards()" onkeypress="preventSubmit(event)"> --}}
<input
  type="text"
  id="searchBookingInput"
  class="search-input"
  placeholder="Search your bookings"
  oninput="filterBookingCards()"
  onkeypress="preventSubmit(event)"
>
<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card" data-location="{{this.location}}">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

<!-- Navbar toggle & search filter -->
<script>
    function toggleNav() {
        document.getElementById('navLinks').classList.toggle('show');
    }

    function filterLocations() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const options = document.querySelectorAll('#slotId option');

        options.forEach(option => {
            const location = option.getAttribute('data-location').toLowerCase();
            if (!location.includes(input) && option.value !== "") {
                option.style.display = "none";
            } else {
                option.style.display = "block";
            }
        });
    }
</script>

<script>
    function filterBookingCards() {
        const input = document.getElementById('searchBookingInput').value.toLowerCase();
        const cards = document.querySelectorAll('.booking-card');

        cards.forEach(card => {
            const location = card.getAttribute('data-location').toLowerCase();
            if (location.includes(input)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
</script>

<script>
function preventSubmit(event) {
    if (event.key === "Enter") {
        event.preventDefault(); // Prevent form submit or page reload
    }
}
</script>
</body>
</html> --}}





{{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<!-- Responsive Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">ParkEase</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/user/home">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="/user/dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#book">Book Now</a></li>
        <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>

        {{#if userId}}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Account</a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="/user/bookings">Booking History</a></li>
            <li><a class="dropdown-item" href="/user/logout">Logout</a></li>
          </ul>
        </li>
        {{else}}
        <li class="nav-item"><a class="nav-link" href="/user/login">Login</a></li>
        {{/if}}
      </ul>
    </div>
  </div>
</nav>

<!-- Hero Section -->
<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase</h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn btn-primary">Get Started</a>
    </div>
</header>

<!-- Get My Location Button -->
<div style="text-align:center; margin: 20px;">
    <button onclick="getLocation()" class="btn btn-success">üìç Get My Location</button>
</div>

<!-- Booking Form -->
<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
    <option value="">Select Location</option>
    {{#each slots}}
        <option value="{{this._id}}" data-location="{{this.location}}">
            {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
        </option>
    {{/each}}
</select>

        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="btn btn-primary">Book Now</button>
        {{else}}
        <a href="/user/login" class="btn btn-warning">Login to Book</a>
        {{/if}}
    </form>
</section>

<!-- Features -->
<section class="features" id="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>

<!-- Booking History -->
<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

<!-- Location Script -->
<script>
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        alert("Geolocation not supported by your browser.");
    }
}

function showPosition(position) {
    const lat = position.coords.latitude;
    const lng = position.coords.longitude;
    console.log("Latitude: " + lat + ", Longitude: " + lng);

    fetch('/user/save-location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ latitude: lat, longitude: lng })
    })
    .then(res => res.json())
    .then(data => alert(data.message || 'Location saved!'));
}

function showError(error) {
    console.error(error.message);
    alert("Unable to retrieve your location.");
}
</script>

</body>
</html> --}}

</script>

<script>
    function filterBookingCards() {
        const input = document.getElementById('searchBookingInput').value.toLowerCase();
        const cards = document.querySelectorAll('.booking-card');

        cards.forEach(card => {
            const location = card.getAttribute('data-location').toLowerCase();
            if (location.includes(input)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
</script>

<script>
function preventSubmit(event) {
    if (event.key === "Enter") {
        event.preventDefault(); 
    }
}
</script>
</body>
</html>

 {{!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ParkEase - Welcome</title>
    <link rel="stylesheet" href="/styles/userHome.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">ParkEase</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/user/home">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="/user/dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#book">Book Now</a></li>
        <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>

        {{#if userId}}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Account</a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="/user/bookings">Booking History</a></li>
            <li><a class="dropdown-item" href="/user/logout">Logout</a></li>
          </ul>
        </li>
        {{else}}
        <li class="nav-item"><a class="nav-link" href="/user/login">Login</a></li>
        {{/if}}
      </ul>
    </div>
  </div>
</nav>

<header class="hero">
    <div class="hero-content">
        <h1>Welcome to ParkEase</h1>
        <p>Find and book your perfect parking spot in just a few clicks!</p>
        <a href="/user/login" class="btn btn-primary">Get Started</a>
    </div>
</header>

<div style="text-align:center; margin: 20px;">
    <button onclick="getLocation()" class="btn btn-success">üìç Get My Location</button>
</div>

<section class="booking-form" id="book">
    <h2>Book Your Parking Slot</h2>
    <form action="/user/book" method="POST">
        <div class="form-group">
            <label for="slotId">Location</label>
            <select id="slotId" name="slotId" required>
                <option value="">Select Location</option>
                {{#each slots}}
                    <option value="{{this._id}}">
                        {{this.location}} - ‚Çπ{{this.price}} ({{this.availableSlot}}/{{this.totalSlot}} available)
                    </option>
                {{/each}}
            </select>
        </div>

        <div class="form-group">
            <label for="date">Date</label>
            <input type="date" id="date" name="date" required>
        </div>
        <div class="form-group">
            <label for="time">Time</label>
            <input type="time" id="time" name="time" required>
        </div>
        <div class="form-group">
            <label for="duration">Duration (hours)</label>
            <input type="number" id="duration" name="duration" min="1" required>
        </div>

        {{#if userId}}
        <button type="submit" class="btn btn-primary">Book Now</button>
        {{else}}
        <a href="/user/login" class="btn btn-warning">Login to Book</a>
        {{/if}}
    </form>
</section>

<section class="features" id="features">
    <h2>Why Choose ParkEase?</h2>
    <div class="features-grid">
        <div class="feature">
            <img src="/images/secure-parking.png" alt="Secure Parking">
            <h3>Secure Parking</h3>
            <p>Our parking facilities are monitored 24/7 with CCTV and security personnel.</p>
        </div>
        <div class="feature">
            <img src="/images/easy-booking.png" alt="Easy Booking">
            <h3>Easy Booking</h3>
            <p>Book your slot in minutes using our user-friendly platform.</p>
        </div>
        <div class="feature">
            <img src="/images/affordable.png" alt="Affordable Rates">
            <h3>Affordable Rates</h3>
            <p>Competitive pricing with no hidden fees for all our parking locations.</p>
        </div>
    </div>
</section>

<section class="user-bookings">
    <h2>Your Booking Details</h2>
    {{#if bookings.length}}
        <div class="bookings-list">
            {{#each bookings}}
                <div class="booking-card">
                    <h3>Location: {{this.location}}</h3>
                    <p>Booking Time: {{this.bookingTime}}</p>
                    <p>Price: ‚Çπ{{this.price}}</p>
                </div>
            {{/each}}
        </div>
    {{else}}
        <p>You have no bookings yet. <a href="#book">Book now!</a></p>
    {{/if}}
</section>

<footer>
    <p>&copy; 2025 ParkEase. All Rights Reserved.</p>
</footer>

<script>
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        alert("Geolocation not supported by your browser.");
    }
}

function showPosition(position) {
    const lat = position.coords.latitude;
    const lng = position.coords.longitude;
    console.log("Latitude: " + lat + ", Longitude: " + lng);

    fetch('/user/save-location', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ latitude: lat, longitude: lng })
    })
    .then(res => res.json())
    .then(data => alert(data.message || 'Location saved!'));
}

function showError(error) {
    console.error(error.message);
    alert("Unable to retrieve your location.");
}
</script>

</body>
</html> --}} 

  function showSuggestions() {
    const input = document.getElementById("searchInput");
    const list = document.getElementById("suggestionsList");
    const query = input.value.toLowerCase();

    list.innerHTML = "";
    list.style.display = "none";

    if (!query) return;

    const matches = allLocations.filter(loc =>
      loc.toLowerCase().includes(query)
    );

    if (matches.length === 0) return;

    matches.forEach(location => {
      const li = document.createElement("li");
      li.textContent = location;
      li.style.padding = "8px";
      li.style.cursor = "pointer";
      li.addEventListener("click", () => {
        input.value = location;
        list.style.display = "none";

        const slotDropdown = document.getElementById("slotId");
        const options = slotDropdown.options;
        for (let i = 0; i < options.length; i++) {
          if (options[i].dataset.location === location) {
            options[i].selected = true;
            break;
          }
        }
      });
      list.appendChild(li);
    });

    list.style.display = "block";
  }




   <script>
  const allLocations = [
    {{#each slots}}
      "{{this.location}}",
    {{/each}}
  ];

  function showSuggestions() {
    const input = document.getElementById("searchInput");
    const list = document.getElementById("suggestionsList");
    const query = input.value.toLowerCase();
    list.innerHTML = "";
    list.style.display = "none";

    if (!query) return;

    const matches = allLocations.filter(loc =>
      loc.toLowerCase().includes(query)
    );

    if (matches.length === 0) return;

    matches.forEach(location => {
      const li = document.createElement("li");
      li.textContent = location;
      li.style.padding = "8px";
      li.style.cursor = "pointer";
      li.addEventListener("click", () => {
        input.value = location;
        list.innerHTML = "";
        list.style.display = "none";
        // You can trigger filtering or redirect here if needed
      });
      list.appendChild(li);
    });

    list.style.display = "block";
  }

  // Hide suggestions on outside click
  document.addEventListener("click", function (event) {
    const input = document.getElementById("searchInput");
    const list = document.getElementById("suggestionsList");
    if (!input.contains(event.target) && !list.contains(event.target)) {
      list.style.display = "none";
    }
  });
</script>


function preventSubmit(event) {
      if (event.key === "Enter") {
        event.preventDefault();
      }
    }


function filterBookingCards() {
      const input = document.getElementById("searchBookingInput").value.toLowerCase();
      const cards = document.querySelectorAll(".booking-card");

      cards.forEach(card => {
        const location = card.getAttribute("data-location").toLowerCase();
        card.style.display = location.includes(input) ? "block" : "none";
      });
    }